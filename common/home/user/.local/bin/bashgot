#!/bin/sh

# pipe the output of curl to this script
#	curl www.google.com | bashgot [<searchpattern>] [begin]
# Second argument passes output to curl
if [ "$2" = "begin" ]; then 
	grep -Po '(href\=.(//)?|src\=.(//)?)\K\S+\.....?(?=\")' | grep -P "$1" | xargs -P 4 curl --remote-name-all
# No argument lists URLs
elif [ ! -n $1 ]; then
	grep -Po '(href\=.(//)?|src\=.(//)?)\K\S+\.....?(?=\")'
# First argument is searchpattern
elif [ -n $1 ]; then
	grep -Po '(href\=.(//)?|src\=.(//)?)\K\S+\.....?(?=\")' | grep -P "$1"
fi
